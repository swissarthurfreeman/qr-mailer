package ch.hopitalrivierachablais.si.exploitation.mailer.service;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;

import ch.hopitalrivierachablais.si.exploitation.mailer.domain.model.Ticket;
import ch.hopitalrivierachablais.si.exploitation.mailer.domain.model.TicketType;
import ch.hopitalrivierachablais.si.exploitation.mailer.service.errors.UnsupportedTicketTypeException;

@Service
public class TicketService {

    @Autowired
    private AssetService assetService;

    @Autowired
    private MailService mailService;

    public void handleTicket(Ticket t) {
        switch (t.type) {
            case TicketType.ASSET:
                assetService.createTicketInAssetPlusWeb(t);
                break;

            case TicketType.MEETING_ROOM:
                mailService.sendEmail(t);
                break;

            case TicketType.PRINTER:
                mailService.sendEmail(t);
                break;
            // TODO : this will never run, enum will not serialize
            default:
                throw new UnsupportedTicketTypeException();
        }
    }
}
